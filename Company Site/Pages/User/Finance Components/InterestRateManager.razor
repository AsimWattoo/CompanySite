@using Company_Site.Base;
@using Company_Site.Data;
@inherits BaseAddPage<InterestRateChangeModel, int>
@using Company_Site.Pages.Components;

<CollapsibleContainer Title="Interest">
    <EditForm Model="NewEntry" class="mt-3" OnValidSubmit="Save">

        <DataAnnotationsValidator/>

        <MultiErrorView Errors="_errors"/>

        <div class="row  my-2">
            <div class="col-md-6">
                <label for="borrowerSelect">Select Borrower</label>
                <InputSelect ValueChanged="@BorrowerCodeChanged" TValue="int" Value=@NewEntry.BorrowerCode ValueExpression="@(() => NewEntry.BorrowerCode)" class="form-select">
                    <option value="-1" selected>--------- Select Option -------</option>
                    @foreach (Account acc in Borrowers)
                    {
                            <option value="@acc.BorrowerCode">@acc.Company</option>
                    }
                </InputSelect>
            </div>
            <div class="col-md-2"></div>
            <div class="col-md-3">
                <label for="borrowerCode">Borrower Code</label>
                <label class="form-control disabled empty-label">@NewEntry.BorrowerCode</label>
            </div>
        </div>
        <div class="row  my-2">
            <div class="col-md-6">
                <label for="note">Note</label>
                <InputText id="note" class="form-control" @bind-Value="NewEntry.Note"/>
            </div>
            <div class="col-md-2"></div>
            <div class="col-md-3">
                <label for="date">Date</label>
                <input type="date" @bind-value=NewEntry.Date class="form-control"/>
            </div>
        </div>
        <div class="row my-2">
            <div class="col-md-3">
                <label for="date">Base Interest Rate</label>
                <InputNumber @bind-Value=NewEntry.BaseInterestRate class="form-control"/>
            </div>
            <div class="col-1"/>
            <div class="col-md-3">
                <label for="date">Spread</label>
                <InputNumber @bind-Value=NewEntry.Spread class="form-control"/>
            </div>
            <div class="col-1" />
            <div class="col-md-3">
                <label for="date">Revised Interest Rate</label>
                <label class="form-control empty-label disabled">@NewEntry.RevisedInterestRate </label>
            </div>
        </div>
        <div class="d-flex justify-content-center mt-4">
            <a @onclick="Clear" class="btn btn-danger me-3">Clear</a>
            <input class="btn btn-primary" value="@(ShouldAdd ? "Add" : "Edit")" type="submit"/>
        </div>
    </EditForm>
</CollapsibleContainer>

<Table T="InterestRateChangeModel" T2="int" 
    ShowSerialNumber=true 
    Items="@Enteries" 
    Headers="@Headers"
    GetId="@GetId" 
    OnDelete="DeleteRecord"
    OnEdit="EditRecord" 
    OnSearch="Search"
    ValueCallback="ValueCallback">
</Table>
